---
date: 2025-08-05
title: AWSサービス実践ガイド：具体的なユースケースと実装例
description: AWSの主要サービスを実践的に活用する方法を解説。EC2、S3、RDS、Lambdaなどを使った具体的な実装例と、本番環境での運用ノウハウを紹介します。コスト最適化やセキュリティのベストプラクティスも含めて解説します。
tags:
    - aws
    - cloud
    - ec2
    - s3
    - lambda
    - serverless
    - devops
prev:
    text: "VitestとPrismaで実践するモックテスト：TypeScriptによる効率的なテスト設計"
    link: "/posts/2025/08/04"
next:
    text: "Terraform公式ドキュメント徹底活用ガイド：インフラ自動化の第一歩"
    link: "/posts/2025/08/06"
---

# AWSサービス実践ガイド：具体的なユースケースと実装例

AWSの各サービスを効果的に活用するには、実践的なユースケースの理解が重要です。本記事では、具体的な実装例とともに、本番環境での運用ノウハウを紹介します。

## S3とCloudFrontによる静的サイトホスティング

```ts
import { S3Client, PutObjectCommand } from '@aws-sdk/client-s3'
import { CloudFrontClient, CreateInvalidationCommand } from '@aws-sdk/client-cloudfront'

const s3Client = new S3Client({ region: 'ap-northeast-1' })
const cloudFrontClient = new CloudFrontClient({ region: 'ap-northeast-1' })

async function deployStaticSite(bucketName: string, distributionId: string) {
  // S3にファイルをアップロード
  await s3Client.send(new PutObjectCommand({
    Bucket: bucketName,
    Key: 'index.html',
    Body: '<html>Hello AWS!</html>',
    ContentType: 'text/html'
  }))

  // CloudFrontのキャッシュを削除
  await cloudFrontClient.send(new CreateInvalidationCommand({
    DistributionId: distributionId,
    InvalidationBatch: {
      CallerReference: `${Date.now()}`,
      Paths: {
        Quantity: 1,
        Items: ['/*']
      }
    }
  }))
}
```

## EC2インスタンスの自動スケーリング設定

```ts
import { AutoScalingClient, UpdateAutoScalingGroupCommand } from '@aws-sdk/client-auto-scaling'

const asgClient = new AutoScalingClient({ region: 'ap-northeast-1' })

async function configureAutoScaling(groupName: string) {
  await asgClient.send(new UpdateAutoScalingGroupCommand({
    AutoScalingGroupName: groupName,
    MinSize: 2,
    MaxSize: 10,
    DesiredCapacity: 2,
    HealthCheckType: 'ELB',
    HealthCheckGracePeriod: 300
  }))
}
```

## Lambda+API GatewayによるサーバーレスAPI

```ts
import { DynamoDBClient } from '@aws-sdk/client-dynamodb'
import { DynamoDBDocumentClient, PutCommand, QueryCommand } from '@aws-sdk/lib-dynamodb'

const ddbClient = new DynamoDBClient({ region: 'ap-northeast-1' })
const docClient = DynamoDBDocumentClient.from(ddbClient)

export const handler = async (event: any) => {
  try {
    // DynamoDBにデータを保存
    await docClient.send(new PutCommand({
      TableName: 'UserEvents',
      Item: {
        userId: event.requestContext.authorizer.claims.sub,
        timestamp: Date.now(),
        eventType: event.body.type,
        data: event.body.data
      }
    }))

    return {
      statusCode: 200,
      body: JSON.stringify({ message: 'Event recorded' })
    }
  } catch (error) {
    return {
      statusCode: 500,
      body: JSON.stringify({ error: 'Failed to process event' })
    }
  }
}
```

## RDSとSecretsManagerの連携

```ts
import { SecretsManagerClient, GetSecretValueCommand } from '@aws-sdk/client-secrets-manager'
import { RDSClient, ModifyDBInstanceCommand } from '@aws-sdk/client-rds'

async function rotateDBPassword(dbInstanceId: string, secretId: string) {
  const secretsClient = new SecretsManagerClient({ region: 'ap-northeast-1' })
  const rdsClient = new RDSClient({ region: 'ap-northeast-1' })

  // シークレットの取得
  const secretResponse = await secretsClient.send(new GetSecretValueCommand({
    SecretId: secretId
  }))

  // RDSインスタンスのパスワード更新
  await rdsClient.send(new ModifyDBInstanceCommand({
    DBInstanceIdentifier: dbInstanceId,
    MasterUserPassword: JSON.parse(secretResponse.SecretString!).password
  }))
}
```

## 実践的なコスト最適化のポイント

1. リソースのライフサイクル管理
   - 開発環境の夜間停止
   - 未使用リソースの定期クリーンアップ
   - リザーブドインスタンスの活用

2. ストレージコストの削減
   - S3ライフサイクルポリシーの設定
   - 不要なEBSボリュームの削除
   - RDSスナップショットの世代管理

3. トラフィックコストの最適化
   - CloudFrontの活用
   - リージョン間転送の最小化
   - VPCエンドポイントの利用

## セキュリティのベストプラクティス

1. アクセス制御
   - IAMロールの最小権限原則
   - セキュリティグループの適切な設定
   - WAFによる不正アクセス対策

2. データ保護
   - KMSによる暗号化
   - バケットポリシーの厳格化
   - CloudTrailによる監査ログ

3. コンプライアンス対応
   - タグ付けポリシーの徹底
   - AWS Configによる設定管理
   - SecurityHubでの一元監視

## まとめ

AWSサービスを実践的に活用するには、各サービスの特性を理解し、適切な組み合わせで運用することが重要です。コスト最適化とセキュリティを意識しながら、段階的にクラウドインフラを整備していきましょう。
